<!DOCTYPE html>
<html lang="en">
<head>
 <title>Important Zites</title>
 <meta charset="utf-8">
 <meta http-equiv="content-type" content="text/html; charset=utf-8" />
 <meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
 <meta name="keywords" content="zite,zites,important,krixano,list,category,search,filter">
 <base href="" target="_top" id="base">
 <script>base.href = document.location.href.replace("/media", "").replace("index.html", "").replace(/[&?]wrapper=False/, "").replace(/[&?]wrapper_nonce=[A-Za-z0-9]+/, "")</script>

 <script src="js/navToggle.js"></script>
 <script>
 	var previousId = "all";
 	var previousActiveTab = document.getElementById('allTab');

 	function tabClick(id, tabElem) {
 		if (id == "all") {
 			// Show all divs except the previousId (because that one is already shown)
 			if (previousId != "info") {
 				var e_info = document.querySelectorAll('.info');
 				Velocity(e_info, "fadeIn", { duration: 500 });
 			}
 			if (previousId != "social") {
 				var e_social = document.querySelectorAll('.social');
 				Velocity(e_social, "fadeIn", { duration: 500 });
 			}
 			if (previousId != "videos") {
 				var e_videos = document.querySelectorAll('.videos');
 				Velocity(e_videos, "fadeIn", { duration: 500 });
 			}
 			if (previousId != "music") {
 				var e_music = document.querySelectorAll('.music');
 				Velocity(e_music, "fadeIn", { duration: 500 });
 			}
 			if (previousId != "games") {
 				var e_games = document.querySelectorAll('.games');
 				Velocity(e_games, "fadeIn", { duration: 500 });
 			}
 			if (previousId != "books") {
 				var e_books = document.querySelectorAll('.books');
 				Velocity(e_books, "fadeIn", { duration: 500 });
 			}
 			if (previousId != "search") {
 				var e_search = document.querySelectorAll('.search');
 				Velocity(e_search, "fadeIn", { duration: 500 });
 			}
 			if (previousId != "blog") {
 				var e_blog = document.querySelectorAll('.blog');
 				Velocity(e_blog, "fadeIn", { duration: 500 });
 			}
 			if (previousId != "programming") {
 				var e_programming = document.querySelectorAll('.programming');
 				Velocity(e_programming, "fadeIn", { duration: 500 });
 			}
 			if (previousId != "other") {
 				var e_other = document.querySelectorAll('.other');
 				Velocity(e_other, "fadeIn", { delay: 1000, duration: 500 });
 			}
 			var e_category = document.querySelectorAll('.category');
 			Velocity(e_category, "fadeIn", { duration: 500 });
 		} else {
	 		if (id != "info") {
 				var e_info = document.querySelectorAll('.info');
 				Velocity(e_info, "fadeOut", { duration: 500 });
 			}
 			if (id != "social") {
 				var e_social = document.querySelectorAll('.social');
 				Velocity(e_social, "fadeOut", { duration: 500 });
 			}
 			if (id != "videos") {
 				var e_videos = document.querySelectorAll('.videos');
 				Velocity(e_videos, "fadeOut", { duration: 500 });
 			}
 			if (id != "music") {
 				var e_music = document.querySelectorAll('.music');
 				Velocity(e_music, "fadeOut", { duration: 500 });
 			}
 			if (id != "games") {
 				var e_games = document.querySelectorAll('.games');
 				Velocity(e_games, "fadeOut", { duration: 500 });
 			}
 			if (id != "books") {
 				var e_books = document.querySelectorAll('.books');
 				Velocity(e_books, "fadeOut", { duration: 500 });
 			}
 			if (id != "search") {
 				var e_search = document.querySelectorAll('.search');
 				Velocity(e_search, "fadeOut", { duration: 500 });
 			}
 			if (id != "blog") {
 				var e_blog = document.querySelectorAll('.blog');
 				Velocity(e_blog, "fadeOut", { duration: 500 });
 			}
 			if (id != "programming") {
 				var e_programming = document.querySelectorAll('.programming');
 				Velocity(e_programming, "fadeOut", { duration: 500 });
 			}
 			if (id != "other") {
 				var e_other = document.querySelectorAll('.other');
 				Velocity(e_other, "fadeOut", { duration: 500 });
 			}
	 		if (previousId != id && previousId != "all") {
	 			var selector = document.querySelectorAll('.' + id);
	 			Velocity(selector, "fadeIn", { delay: 650, duration: 500 });
	 		}
	 		var e_category = document.querySelectorAll('.category');
	 		Velocity(e_category, "fadeOut", { duration: 500 });
	 	}

 		previousId = id;

 		toggleClass(tabElem, "is-active");
 		toggleClass(previousActiveTab, "is-active");

 		previousActiveTab = tabElem;
 		return false;
 	}
 </script>

 <link rel="stylesheet" href="css/bulma.css" />
 <link rel="stylesheet" href="css/main.css" />

 <style>
 	.table tbody th, .table thead tr > th:first-child {
 		text-align: center;
 	}
 </style>
</head>
<body>
	<nav class="nav has-shadow">
		<div class="container">
		  <div class="nav-left">
		    <a href="./" class="nav-item" style="font-weight: bold;">Important Zites</a>
		    <span class="nav-item"><code id="zite_num" class="tag is-light" style="display: none;">0</code></span>
		  </div>

		  <!-- This "nav-toggle" hamburger menu is only visible on mobile -->
		  <!-- You need JavaScript to toggle the "is-active" class on "nav-menu" -->
		  <span id="nav-toggle" class="nav-toggle">
		    <span></span>
		    <span></span>
		    <span></span>
		  </span>

		  <!-- This "nav-menu" is hidden on mobile -->
		  <!-- Add the modifier "is-active" to display it on mobile -->
		  <div id="nav-menu" class="nav-right nav-menu">
		    <a href="./" class="nav-item is-active">Home</a>
		    <!--<a class="nav-item">Blog</a>-->
		    <a href="request.html" class="nav-item">Requests</a>
		    <a href="about.html" class="nav-item">About</a>
		    <span class="nav-item"><a href="#Select+user" id="select_user" class="button is-info" onclick='return page.selectUser()'>Select user</a></span>
		  </div>
		</div>
	</nav>

	<section class="section">
		<!--<div class="tabs is-centered">
		</div>-->

		<div class="columns">
			<div class="column is-2 is-offset-1">
				<aside class="menu">
					<p class="menu-label">Categories</p>
					<ul class="menu-list">
						<li><a id="allTab" class="is-active" onclick="tabClick('all', this); return false;">All</a></li>
						<li><a onclick="tabClick('info', this); return false;">Info</a></li>
						<li><a onclick="tabClick('social', this); return false;">Social</a></li>
						<li><a onclick="tabClick('search', this); return false;">Search</a></li>
						<li><a onclick="tabClick('videos', this); return false;">Videos</a></li>
						<li><a onclick="tabClick('music', this); return false;">Music</a></li>
						<li><a onclick="tabClick('games', this); return false;">Games</a></li>
						<li><a onclick="tabClick('books', this); return false;">Books</a></li>
						<li><a onclick="tabClick('blog', this); return false;">Blog</a></li>
						<!--<li><a>News</a></li>-->
						<li><a onclick="tabClick('programming', this); return false;">Programming</a></li>
						<li><a onclick="tabClick('other', this); return false;">Other</a></li>
					</ul>
				</aside>
			</div>
			<div class="column is-8">
				<!--<div class="notification is-info" style="margin-right: 50px; margin-left: 70px;">
					<p>New to ZeroNet? <a href="/138R53t3ZW7KDfSfxVpWUsMXgwUnsDNXLP/">Visit the Wiki</a></p>
				</div>--> <!-- TODO -->
				<table class="table is-narrow is-striped" style="margin-left: 10px; margin-right: 10px;">
					<thead>
						<tr>
							<th>Name</th>
							<th>Description</th>
						</tr>
					</thead>
					<tbody id="zites_list">
						<!--<tr class="social">
							<th><a href="/mail.zeroverse.bit/">ZeroVerse Mail</a></th>
							<td>Mail for ZeroVerse <code class="category" style="font-style: italic;">SOCIAL</code></td>
						</tr>--> <!-- Abandoned Project -->
						<!--<tr class="books">
							<th><a href="/1DszUR6XLMLztoPZ4q9v7Ym6916HrnUSqz">ZeroManga</a></th>
							<td>Download mangas</td>
						</tr>-->
						<!--<tr>
							<th><a href="#">ZeroNews</a></th>
							<td>One of the first News zites on ZeroNet</td>
						</tr>-->
						<!--<tr class="other">
							<th><a href="/1HPgDoReCFtE9qy71hnp55ksBVvV1gHJLQ">id@ZeroVerse</a></th>
							<td>User authorization provider <code class="category" style="font-style: italic;">OTHER</code></td>
						</tr>--> <!-- Abandoned Project -->
					</tbody>
				</table>
			</div>
		</div>
	</section>

	<footer class="footer">
		<div class="container">
			<span style="text-align: center">
				<small>NOTE: This zite is still a work-in-progress.</small><br>
				<small>Zite created on April 12th, 2017 by <a href="/Me.ZeroNetwork.bit/?Profile/12h51ug6CcntU2aiBjhP8Ns2e5VypbWWtv/12gAes6NzDS9E2q6Q1UXrpUdbPS6nvuBPu/krixano@zeroid.bit">krixano@zeroid.bit</a> (Christian Seibold)</small><br>
				<small><a href="https://github.com/krixano/ImportantZites">Github Link</a></small>
			</span>
		</div>
	</footer>

	<script type="text/javascript" src="js/ZeroFrame.js"></script>
	<script type="text/javascript" src="js/velocity.min.js"></script>

	<script>
		class ZeroChat extends ZeroFrame {
		    /*addMessage (username, message) {
		        var message_escaped = message.replace(/</g, "&lt;").replace(/>/g, "&gt;")  // Escape html tags in the message
		        this.messages.innerHTML += "<li><b>" + username + "</b>: " + message_escaped + "</li>"
		    }*/

		    onOpenWebsocket() {
		        //this.messages = document.getElementById("messages")
		        //this.addMessage("System", "Ready to call ZeroFrame API!")
		        this.cmd("siteInfo", {}, (site_info) => {
		            if (site_info.cert_user_id)
		                document.getElementById("select_user").innerText = site_info.cert_user_id
		            this.site_info = site_info
		            this.loadZites();
		        });
		    }

		    selectUser() {
	            this.cmd("certSelect", {accepted_domains: ["zeroid.bit", "kaffie.bit"]})
	            return false
	        }

	        onRequest(cmd, message) {
		        if (cmd == "setSiteInfo") {
		            this.site_info = message.params;  // Save site info data to allow access it later
		            console.log(message.params);
		            if (message.params.cert_user_id)
		                document.getElementById("select_user").innerHTML = message.params.cert_user_id
		            else if (!message.params.cert_user_id) {
		                document.getElementById("select_user").innerHTML = "Select user";
		            }
		            if (message.params.event && message.params.event[0] == "file_done") {
	            		this.loadZites();
	            	}
		        }
		    }

		    loadZites() {
		    	var zites_list = document.getElementById("zites_list");
		    	var zite_indicator = document.getElementById('zite_num');
		    	//zites_list_jquery.velocity("fadeOut", { duration: 500 });
		    	zites_list.style.display = "none";
		    	zites_list.innerHTML = "";
		    	zite_indicator.style.display = "none";
		    	this.cmd("dbQuery", ["SELECT * FROM zites"], (zites) => {
		    		//console.log(zites.length);
		    		zite_indicator.innerHTML = zites.length + " zites";
		    		for (var i = 0; i < zites.length; i++) {
		    			//console.log(zites[i].title);
		    			zites_list.innerHTML += "<tr class='" + zites[i].category + "'><th><a href='/"+ zites[i].address + "'>" + zites[i].title + "</a></th><td>" + zites[i].description + " <code class='category' style='font-style: italic;'>" + zites[i].category.toUpperCase() + "</code></td></tr>";
		    		}
			    	Velocity(zites_list, "fadeIn", { duration: 500 });
			    	Velocity(zite_indicator, "fadeIn", { duration: 500 });
		    	});
		    }
		}

		page = new ZeroChat()

		previousActiveTab = document.getElementById('allTab');
	</script>

	<!--<script>

	class Page extends ZeroFrame {
		setSiteInfo(site_info) {
			var out = document.getElementById("out")
			out.innerHTML =
				"Page address: " + site_info.address +
				"<br>- Peers: " + site_info.peers +
				"<br>- Size: " + site_info.settings.size +
				"<br>- Modified: " + (new Date(site_info.content.modified*1000))
		}

		onOpenWebsocket() {
			this.cmd("siteInfo", [], function(site_info) {
				page.setSiteInfo(site_info)
			})
		}

		onRequest(cmd, message) {
			if (cmd == "setSiteInfo")
				this.setSiteInfo(message.params)
			else
				this.log("Unknown incoming message:", cmd)
		}
	}
	page = new Page()

	</script>-->

</body>
</html>